<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>School Photo Canvas Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f4f7;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
    }

    .box {
      max-width: 900px;
      margin: auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
    }

    button {
      margin-top: 15px;
      background: #1976d2;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background: #125ca1;
    }

    canvas {
      display: block;
      margin: 20px auto;
      background: white;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>

<h1>ðŸ“¸ School Photo Canvas Generator</h1>

<div class="box">
  <label>Event Name</label>
  <input type="text" id="event" placeholder="Annual Day / Field Trip">

  <label>Date</label>
  <input type="date" id="date">

  <label>Grid Layout</label>
  <select id="grid">
    <option value="2">2 x 2</option>
    <option value="3" selected>3 x 3</option>
    <option value="4">4 x 4</option>
  </select>

  <label>Upload Photos</label>
  <input type="file" id="photos" multiple accept="image/*">

  <button onclick="generateCanvas()">Generate Canvas</button>
  <button onclick="downloadImage()">Download Image</button>
</div>

<!-- A4 SIZE CANVAS @ 300 DPI -->
<canvas id="canvas" width="2480" height="3508"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function generateCanvas() {
  const files = document.getElementById("photos").files;
  if (files.length === 0) {
    alert("Upload at least one photo");
    return;
  }

  const grid = parseInt(document.getElementById("grid").value);
  const eventText = document.getElementById("event").value || "School Event";
  const dateText = document.getElementById("date").value || "";

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Header
  ctx.fillStyle = "#000";
  ctx.textAlign = "center";
  ctx.font = "bold 70px Arial";
  ctx.fillText("SRI CHAITANYA INTERNATIONAL SCHOOL", canvas.width / 2, 100);

  ctx.font = "42px Arial";
  ctx.fillText("Narsapuram, West Godavari", canvas.width / 2, 160);

  ctx.font = "38px Arial";
  ctx.fillText(eventText + (dateText ? " | " + dateText : ""), canvas.width / 2, 220);

  const startY = 300;
  const padding = 20;
  const cellSize = (canvas.width - padding * (grid + 1)) / grid;

  let index = 0;

  for (let row = 0; row < grid; row++) {
    for (let col = 0; col < grid; col++) {
      if (index >= files.length) return;

      const img = new Image();
      const x = padding + col * (cellSize + padding);
      const y = startY + row * (cellSize + padding);

      img.onload = () => {
        ctx.drawImage(img, x, y, cellSize, cellSize);
        ctx.strokeStyle = "#000";
        ctx.strokeRect(x, y, cellSize, cellSize);
      };

      img.src = URL.createObjectURL(files[index]);
      index++;
    }
  }
}

function downloadImage() {
  const link = document.createElement("a");
  link.download = "school-photo-canvas.jpg";
  link.href = canvas.toDataURL("image/jpeg", 0.95);
  link.click();
}
</script>

</body>
</html>